Bootstrap: docker
From: continuumio/anaconda3

%startscript
    flask run

%environment
    export FLASK_APP=smacbenchmarking/container/container_app.py

%files
    . /benchmarking

%post
    apt update -y
    apt upgrade -y
    apt install curl -y
    apt install wget -y
    apt install git -y
    . /opt/conda/etc/profile.d/conda.sh

   conda update -n base -c defaults conda
   conda create -n environment python=3.11
   conda init bash
   conda activate environment
   pip install -r benchmarking/requirements.txt
   pip install ../benchmarking
   pip install -r benchmarking/container_recipes/general_requirements_container_problem.txt

   # benchmark-specific commands go here
   pip install -r benchmarking/container_recipes/bbob/bbob_requirements.txt

   echo "Successfully installed all features"